(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{11:function(e,t,n){"use strict";n.r(t);var s=n(1),o=n.n(s),a=n(4),c=n.n(a),r=(n(9),n(3),n(0));var i=function(e){let{onLoginSuccess:t}=e;const[n,o]=Object(s.useState)({username:"",password:""}),[a,c]=Object(s.useState)(""),i=e=>{const{name:t,value:n}=e.target;o((e=>({...e,[t]:n})))};return Object(r.jsx)("div",{className:"login-container",children:Object(r.jsxs)("form",{className:"login-form",onSubmit:async e=>{e.preventDefault();try{const e=await fetch("http://192.168.1.31:8080/v2/login",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(n)});if(!e.ok){const t=await e.json();throw new Error(t.message||"Login failed")}const s=await e.json();localStorage.setItem("token",s.token),t(s.token)}catch(s){c(s.message)}},children:[Object(r.jsx)("input",{className:"login-input",id:"username",name:"username",type:"text",placeholder:"Username",value:n.username,onChange:i,required:!0}),Object(r.jsx)("input",{className:"login-input",id:"password",name:"password",type:"password",placeholder:"Password",value:n.password,onChange:i,required:!0}),Object(r.jsx)("button",{className:"login-button",type:"submit",children:"Login"}),a&&Object(r.jsx)("div",{className:"error",children:a})]})})};var l=function(){const[e,t]=Object(s.useState)([]),[n,o]=Object(s.useState)("");return Object(s.useEffect)((()=>{const e=localStorage.getItem("token");e?fetch("http://192.168.1.31:8080/v2/employees",{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}).then((e=>{if(!e.ok)throw new Error("HTTP status ".concat(e.status));return e.json()})).then((e=>{t(e)})).catch((e=>{console.error("Failed to fetch12qw:",e),o("Failed to fetch employees.")})):o("No authentication token. Please log in.")}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Employee List"}),n&&Object(r.jsx)("div",{className:"error",children:n}),Object(r.jsx)("ul",{children:e.map((e=>Object(r.jsxs)("li",{children:[e.firstName," ",e.lastName]},e.employeeId)))})]})};var d=function(){const[e,t]=Object(s.useState)(localStorage.getItem("token"));return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("div",{className:"header",children:Object(r.jsx)("h1",{className:"logo",children:"KubeCloudsInc"})}),e?Object(r.jsx)(l,{}):Object(r.jsx)(i,{onLoginSuccess:e=>{t(e),localStorage.setItem("token",e)}})]})};c.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(d,{})}),document.getElementById("root"))},3:function(e,t,n){},9:function(e,t,n){}},[[11,1,2]]]);
//# sourceMappingURL=main.4b81e4b3.chunk.js.map